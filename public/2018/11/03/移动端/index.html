<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>移动端 · Jonnzer的博客</title><meta name="description" content="移动端 - Jonnzer"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/gandalfr.css"><link rel="search" type="application/opensearchdescription+xml" href="https://jonnzer.github.io/atom.xml" title="Jonnzer的博客"><script src="/js/Valine.min.js"></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Jonnzer的博客" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/jonnzer/" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">移动端</h1><div class="tags"><a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" class="tag-title">#移动端</a></div><div class="post-info">Nov 3, 2018</div><div class="post-content"><h4 id="如何编写移动端😎-？话不多说，即刻带大家进入今天主题"><a href="#如何编写移动端😎-？话不多说，即刻带大家进入今天主题" class="headerlink" title="如何编写移动端😎 ？话不多说，即刻带大家进入今天主题"></a>如何编写移动端😎 ？话不多说，即刻带大家进入今天主题</h4><ul>
<li><p>如我们常规所见，移动端和PC端的最大差异就是：设备的分辨率。</p>
</li>
<li><p>移动端：下面是一段默认加载在头部的设置<code>html标签的fontSize</code>的js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">pageWidth= <span class="number">750</span></span>) </span>&#123; <span class="comment">// 设计稿可以传参，普遍是750</span></span><br><span class="line">    !(<span class="function"><span class="keyword">function</span>(<span class="params">win, doc</span>)</span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">setFontSize</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 获取设备 宽度</span></span><br><span class="line">            <span class="keyword">var</span> winWidth =  <span class="built_in">window</span>.innerWidth;</span><br><span class="line">            <span class="keyword">var</span> size = (winWidth / pageWidth) * <span class="number">100</span>;</span><br><span class="line">            doc.documentElement.style.fontSize = size + <span class="string">'px'</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> evt = <span class="string">'onorientationchange'</span> <span class="keyword">in</span> win ? <span class="string">'orientationchange'</span> : <span class="string">'resize'</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        win.addEventListener(evt, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            clearTimeout(timer);</span><br><span class="line"></span><br><span class="line">            timer = setTimeout(setFontSize, <span class="number">300</span>);</span><br><span class="line">        &#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        win.addEventListener(<span class="string">"pageshow"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (e.persisted) &#123;</span><br><span class="line">                clearTimeout(timer);</span><br><span class="line"></span><br><span class="line">                timer = setTimeout(setFontSize, <span class="number">300</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        setFontSize();</span><br><span class="line"></span><br><span class="line">    &#125;(<span class="built_in">window</span>, <span class="built_in">document</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>动态的获取设备独立像素，然后除以设计稿的宽度(常规UI是输出750宽度)，要乘100，然后赋给根字体的<code>fontsize</code>，以致做到自适应，来动态改变根字体大小。这里拿到是百分比 。</li>
<li>为什么要乘100，首先假设说设备分辨率是375，375 / 750是0.5，0.5我们称为<code>比例R</code>.而浏览器默认最小字体为12px。 这时我们的0.5就会被12重置了。所以我们需要放大一些，而100又很好算。在此，就把浏览器默认字号设置为100px，刚才获取的0.5是比例。那么相乘后获得的50px，就是自适应后的html根字体大小。</li>
<li>为了适配移动端，把单位转换成rem。  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">    font-size: <span class="number">16</span>px; <span class="comment">// 会使rem不跟随错误的12px或者10px （比如设置62.5%时，就会`bodysize`是10px，那样em和rem都会算错。）</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li>那么1rem 等于（2）步骤返回的html 根字体大小。但这时候问题来了，设计稿输出的是750宽的图纸，而且是px，那么中间该怎么转化？？？比如说1rem 等于50px 那我现在的banner图是690px高，我应该是输出一个690/50 = result(rem)<br>借助<code>sass函数</code>，输入值为690px，<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="function"><span class="keyword">function</span> <span class="title">pxTorem</span>(<span class="params">$px</span>)</span>&#123;<span class="comment">//$px为需要转换的字号</span></span><br><span class="line">    @<span class="keyword">return</span> $px / $browser-<span class="keyword">default</span>-font-size * <span class="number">1</span>rem; <span class="comment">// 其实这里可以理解为 $px * （1rem/ 100）,也就是banner图的高度 * （比例R），从而获得它在这个该设备应该有的大小。</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
所以在我们平时写css的时候，可以这么写样式了<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.city-li&#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">  height: pxTorem(<span class="number">56</span>px);</span><br><span class="line">  line-height: pxTorem(<span class="number">56</span>px);</span><br><span class="line">  padding-left: pxTorem(<span class="number">10</span>px);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>在可以书写移动端样式后。继续探讨：第二差异是网络环境。网络加载速度不一致是移动端的瓶颈，所以代码量的大小和质量是移动端性能优化的关键。</p>
</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2019/02/15/%E5%90%88%E6%88%90%E5%9B%BE%E7%89%87/" class="prev">PREV</a><a href="/2018/07/27/%E4%BA%8B%E4%BB%B6/" class="next">NEXT</a></div><div id="vcomments"></div><!--script(src="//unpkg.com/valine/dist/Valine.min.js")--><script>new Valine({ // 里面的参数配置具体参考Valine官网
    el: '#vcomments',
    appId: `Hv8Cfy93FCgDUy3fP2Av9Ies-gzGzoHsz`,
    appKey: `4fAniISvXobBOUUx5SEE89dV`,
    placeholder: '快来评论吧(#^.^#)',
    avatar: 'wavatar'
});</script><div class="copyright"><p>© 2017 - 2020 <a href="https://jonnzer.github.io">Jonnzer</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/MikeCoder/hexo-theme-gandalfr" target="_blank">hexo-theme-gandalfr</a>.</p></div></footer></div><script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="/js/jquery.js"></script></body></html>