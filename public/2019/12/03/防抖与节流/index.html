<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>é˜²æŠ–ä¸èŠ‚æµ Â· Jonnzerçš„åšå®¢</title><meta name="description" content="é˜²æŠ–ä¸èŠ‚æµ - Jonnzer"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/gandalfr.css"><link rel="search" type="application/opensearchdescription+xml" href="https://jonnzer.github.io/atom.xml" title="Jonnzerçš„åšå®¢"><script src="/js/Valine.min.js"></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Jonnzerçš„åšå®¢" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/jonnzer/" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">é˜²æŠ–ä¸èŠ‚æµ</h1><div class="tags"><a href="/tags/JS%E4%BC%98%E5%8C%96/" class="tag-title">#JSä¼˜åŒ–</a></div><div class="post-info">Dec 3, 2019</div><div class="post-content"><h3 id="1-é˜²æŠ–"><a href="#1-é˜²æŠ–" class="headerlink" title="1.é˜²æŠ–"></a>1.é˜²æŠ–</h3><p>âœ¨ ä¸šåŠ¡åœºæ™¯ï¼šä½ å°½ç®¡è§¦å‘äº‹ä»¶ï¼Œä½†æ˜¯æˆ‘ä¸€å®šåœ¨äº‹ä»¶è§¦å‘ n ç§’åæ‰æ‰§è¡Œã€‚<br>å¦‚æœä½ åœ¨ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ n ç§’å†…åˆè§¦å‘äº†è¿™ä¸ªäº‹ä»¶ï¼Œé‚£æˆ‘å°±ä»¥æ–°çš„äº‹ä»¶çš„æ—¶é—´ä¸ºå‡†ï¼Œn ç§’åæ‰æ‰§è¡Œï¼Œ<br>æ€»ä¹‹ï¼Œå°±æ˜¯è¦ç­‰ä½ è§¦å‘å®Œäº‹ä»¶ n ç§’å†…ä¸å†è§¦å‘äº‹ä»¶ï¼Œæˆ‘æ‰æ‰§è¡Œ.<br>ç®€å•çš„è¯´æ³•æ˜¯ï¼Œå–å†³äºä¸Šæ¬¡æ²¡æ“ä½œåï¼Œdelayæ—¶é—´åæ‰§è¡Œã€‚</p>
<p>ğŸ‘é€‚ç”¨åœºæ™¯ï¼šinputçš„æ ¼å¼éªŒè¯ã€æäº¤æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼ˆè§¦å‘é¢‘ä¸é‚£ä¹ˆé«˜ï¼‰</p>
<p>ä»‹ç»ä¸‰ä¸ªç‰ˆæœ¬ï¼š</p>
<h4 id="1æŒ‡å®šthis"><a href="#1æŒ‡å®šthis" class="headerlink" title="1æŒ‡å®šthis"></a>1æŒ‡å®šthis</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timeout;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        clearTimeout(timeout)</span><br><span class="line">        timeout = setTimeout(func,wait)  <span class="comment">// ä¿æŒåªæ˜¯ä¸€ä¸ªå®šæ—¶å™¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-thisæŒ‡å‘-amp-amp-æŒ‡å®šä¼ å‚ï¼ˆæ¯”å¦‚eventï¼‰"><a href="#2-thisæŒ‡å‘-amp-amp-æŒ‡å®šä¼ å‚ï¼ˆæ¯”å¦‚eventï¼‰" class="headerlink" title="2 thisæŒ‡å‘ &amp;&amp; æŒ‡å®šä¼ å‚ï¼ˆæ¯”å¦‚eventï¼‰"></a>2 thisæŒ‡å‘ &amp;&amp; æŒ‡å®šä¼ å‚ï¼ˆæ¯”å¦‚<code>event</code>ï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timeout;</span><br><span class="line">    <span class="comment">// console.log(this) // è¿™é‡Œçš„æ—¶å€™æŒ‡å‘window</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> context = <span class="keyword">this</span> <span class="comment">// è¿™é‡Œçš„æ—¶å€™æŒ‡å‘btn å…³é”®æ˜¯ç¼“å­˜è¿™æ—¶å€™çš„this</span></span><br><span class="line">        <span class="keyword">var</span> args = <span class="built_in">arguments</span></span><br><span class="line">        clearTimeout(timeout)</span><br><span class="line">        timeout = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//æ²¡ç»‘å®šcontextæ—¶ï¼Œè¿™é‡ŒthisæŒ‡å‘window</span></span><br><span class="line">            func.apply(context,args)</span><br><span class="line">        &#125;, wait)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-thisæŒ‡å‘-amp-amp-æŒ‡å®šä¼ å‚-amp-amp-ç«‹å³æ‰§è¡Œ"><a href="#3-thisæŒ‡å‘-amp-amp-æŒ‡å®šä¼ å‚-amp-amp-ç«‹å³æ‰§è¡Œ" class="headerlink" title="3 thisæŒ‡å‘ &amp;&amp; æŒ‡å®šä¼ å‚ &amp;&amp; ç«‹å³æ‰§è¡Œ"></a>3 thisæŒ‡å‘ &amp;&amp; æŒ‡å®šä¼ å‚ &amp;&amp; ç«‹å³æ‰§è¡Œ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait, immediate</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> timeout;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> context = <span class="keyword">this</span></span><br><span class="line">            <span class="keyword">var</span> args = <span class="built_in">arguments</span></span><br><span class="line">            <span class="keyword">if</span> (timeout) &#123; clearTimeout(timeout) &#125;</span><br><span class="line">            <span class="keyword">if</span> (immediate) &#123; <span class="comment">// ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">                <span class="comment">// timeoutæœ‰å€¼çš„æƒ…å†µä¸‹ï¼Œæ”¹ä¸ºå»¶æ—¶</span></span><br><span class="line">                <span class="keyword">var</span> callNow = !timeout</span><br><span class="line">                timeout = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    timeout = <span class="literal">null</span></span><br><span class="line">                &#125;,wait)</span><br><span class="line">                <span class="keyword">if</span> (callNow) &#123; func.apply(context,args) &#125;</span><br><span class="line">                <span class="comment">// è·‘å®Œç«‹å³æ‰§è¡Œï¼Œæ°¸è¿œéƒ½ä¼šæ‰§è¡Œä¸Šé¢çš„timeout = nullï¼Œ</span></span><br><span class="line">                <span class="comment">// ç„¶åä¸‹ä¸€æ¬¡è¿›å…¥åˆ¤æ–­callNowæ—¶ï¼Œåˆä¼šæ˜¯ç«‹å³æ‰§è¡Œã€‚ </span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                timeout = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    func.apply(context,args)</span><br><span class="line">                &#125;,wait)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-èŠ‚æµ"><a href="#2-èŠ‚æµ" class="headerlink" title="2.èŠ‚æµ"></a>2.èŠ‚æµ</h3><p>æŒ‰æŒ‡å®šçš„delayæ‰§è¡Œ<br> ğŸ‘ é€‚ç”¨åœºæ™¯ï¼šï¼ˆè§¦å‘é¢‘é«˜ï¼‰resize, touchmove, mousemove, scroll åŠ¨ç”»åœºæ™¯</p>
<p>ä¸‹é¢ä»‹ç»ä¸¤ä¸ªç‰ˆæœ¬ï¼š</p>
<h4 id="âœ¨-ä½¿ç”¨æ—¶é—´æˆ³"><a href="#âœ¨-ä½¿ç”¨æ—¶é—´æˆ³" class="headerlink" title="âœ¨ ä½¿ç”¨æ—¶é—´æˆ³"></a>âœ¨ ä½¿ç”¨æ—¶é—´æˆ³</h4><p>  ä½¿ç”¨æ—¶é—´æˆ³ï¼Œå½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å–å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œ<br>  ç„¶åå‡å»ä¹‹å‰çš„æ—¶é—´æˆ³(æœ€ä¸€å¼€å§‹å€¼è®¾ä¸º 0 )ï¼Œ<br>  å¦‚æœå¤§äºè®¾ç½®çš„æ—¶é—´å‘¨æœŸï¼Œå°±æ‰§è¡Œå‡½æ•°ï¼Œç„¶åæ›´æ–°æ—¶é—´æˆ³ä¸ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œ<br>  å¦‚æœå°äºï¼Œå°±ä¸æ‰§è¡Œã€‚</p>
<div class="tip">
    ç¬¬ä¸€ä¸‹ä¼šç«‹åˆ»æ‰§è¡Œ
</div>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// +new Date() å°†ä¼šè°ƒç”¨ Date.prototype ä¸Šçš„ valueOf() æ–¹æ³•ï¼Œ</span></span><br><span class="line"><span class="comment">// Date.prototype.valueæ–¹æ³•ç­‰åŒäºDate.prototype.getTime()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> previous = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> now = +<span class="keyword">new</span> <span class="built_in">Date</span>() </span><br><span class="line">        <span class="keyword">const</span> args = <span class="built_in">arguments</span></span><br><span class="line">        <span class="keyword">const</span> context = <span class="keyword">this</span></span><br><span class="line">        <span class="keyword">if</span> ((now - previous) &gt; wait) &#123;</span><br><span class="line">            func.apply(context,args)</span><br><span class="line">            previous = now</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ¨-ä½¿ç”¨å®šæ—¶å™¨"><a href="#âœ¨-ä½¿ç”¨å®šæ—¶å™¨" class="headerlink" title="âœ¨ ä½¿ç”¨å®šæ—¶å™¨"></a>âœ¨ ä½¿ç”¨å®šæ—¶å™¨</h4><p>å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œ<br>å†è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œï¼Œ<br>ç›´åˆ°å®šæ—¶å™¨æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œå‡½æ•°ï¼Œ<br>æ¸…ç©ºå®šæ—¶å™¨ï¼Œ<br>è¿™æ ·å°±å¯ä»¥è®¾ç½®ä¸‹ä¸ªå®šæ—¶å™¨ã€‚</p>
<div class="tip">
    ç¬¬ä¸€ä¸‹ä¼šå»¶æ—¶æ‰§è¡Œ
</div>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> timeout;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> context = <span class="keyword">this</span></span><br><span class="line">            <span class="keyword">const</span> args = <span class="built_in">arguments</span></span><br><span class="line">            <span class="keyword">if</span> (!timeout) &#123;</span><br><span class="line">                timeout = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    timeout = <span class="literal">null</span></span><br><span class="line">                    func.apply(context, args)</span><br><span class="line">                &#125;, wait)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-ä¸¤è€…çš„å…³è”ä¸åŒºåˆ«"><a href="#3-ä¸¤è€…çš„å…³è”ä¸åŒºåˆ«" class="headerlink" title="3.ä¸¤è€…çš„å…³è”ä¸åŒºåˆ«"></a>3.ä¸¤è€…çš„å…³è”ä¸åŒºåˆ«</h3><p>ä¸¤è€…éƒ½æœ‰æ§åˆ¶è§¦å‘çš„æ¬¡æ•°ï¼Œé˜²æŠ–æ§åˆ¶çš„æ›´å‰å®³ï¼ŒèŠ‚æµæ˜¯é™ä½é¢‘ç‡<br>å‡è®¾æ— é™æ¬¡è§¦å‘ï¼šé˜²æŠ–å‡½æ•°æ°¸è¿œä¸ä¼šçœŸæ­£æ‰§è¡Œï¼ŒèŠ‚æµå‡½æ•°åˆ™ä¼šæŒ‰ç…§é—´éš”æ—¶é—´æ‰§è¡Œã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<br><a href="https://zhuanlan.zhihu.com/p/38313717" target="_blank" rel="noopener">ä¸“æ </a><br><a href="https://github.com/mqyqingfeng/Blog/issues/26" target="_blank" rel="noopener">mqyqingfeng  issue</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2019/12/03/JS%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/" class="prev">PREV</a><a href="/2019/08/05/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%85%A5%E9%97%A8%E7%AF%87/" class="next">NEXT</a></div><div id="vcomments"></div><!--script(src="//unpkg.com/valine/dist/Valine.min.js")--><script>new Valine({ // é‡Œé¢çš„å‚æ•°é…ç½®å…·ä½“å‚è€ƒValineå®˜ç½‘
    el: '#vcomments',
    appId: `Hv8Cfy93FCgDUy3fP2Av9Ies-gzGzoHsz`,
    appKey: `4fAniISvXobBOUUx5SEE89dV`,
    placeholder: 'å¿«æ¥è¯„è®ºå§(#^.^#)',
    avatar: 'wavatar'
});</script><div class="copyright"><p>Â© 2017 - 2020 <a href="https://jonnzer.github.io">Jonnzer</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/MikeCoder/hexo-theme-gandalfr" target="_blank">hexo-theme-gandalfr</a>.</p></div></footer></div><script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="/js/jquery.js"></script></body></html>