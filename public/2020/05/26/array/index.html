<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>æ•°ç»„å¸¸è§æŠ€å·§ Â· Jonnzerçš„åšå®¢</title><meta name="description" content="æ•°ç»„å¸¸è§æŠ€å·§ - Jonnzer"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/gandalfr.css"><link rel="search" type="application/opensearchdescription+xml" href="https://jonnzer.github.io/atom.xml" title="Jonnzerçš„åšå®¢"><script src="/js/Valine.min.js"></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Jonnzerçš„åšå®¢" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/jonnzer/" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">æ•°ç»„å¸¸è§æŠ€å·§</h1><div class="tags"><a href="/tags/Array/" class="tag-title">#Array</a></div><div class="post-info">May 26, 2020</div><div class="post-content"><h3 id="1-æ•°ç»„é™ç»´"><a href="#1-æ•°ç»„é™ç»´" class="headerlink" title="1. æ•°ç»„é™ç»´"></a>1. æ•°ç»„é™ç»´</h3><p>äºŒç»´æ•°ç»„é™ç»´æˆä¸€ç»´æ•°ç»„ï¼ˆå¼•è‡ªvueæºç ï¼‰</p>
<blockquote>
<p>åˆ©ç”¨åŸç†ï¼š<br>(1) <code>concat</code>çš„å±æ€§ : å¦‚æœconcatæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œè¯¥å…ƒç´ ä¼šè¢«ç›´æ¥æ’å…¥åˆ°æ–°æ•°ç»„ä¸­ï¼›å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„å„ä¸ªå…ƒç´ å°†è¢«æ’å…¥åˆ°æ–°æ•°ç»„ä¸­ï¼›<br>(2) <code>apply</code>çš„ä¼˜åŒ–ï¼š<code>Array.prototype.concat.apply</code>([], children) ç­‰åŒäº [].concat(demoArr)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> demoArr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,[<span class="number">7</span>,<span class="number">8</span>],[<span class="number">22</span>,<span class="number">23</span>,<span class="number">43</span>]]</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">simpleNormalizeChildren</span> (<span class="params">children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; children.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(children[i])) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.concat.apply([], children)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> children</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">simpleNormalizeChildren(demoArr)  </span><br><span class="line"><span class="comment">// result =&gt;  [1, 2, 3, 4, 5, 7, 8, 22, 23, 43]</span></span><br></pre></td></tr></table></figure>

<h4 id="æ‰©å±•ï¼š"><a href="#æ‰©å±•ï¼š" class="headerlink" title="æ‰©å±•ï¼š"></a>æ‰©å±•ï¼š</h4><p>å¤šç»´æ•°ç»„é€’å½’é™ç»´(å€ŸåŠ©äº†<code>é€’å½’</code>çš„èƒ½åŠ›)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> children = [<span class="number">1</span>, [<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>, [<span class="number">7</span>, <span class="number">8</span>]]], [<span class="number">9</span>, <span class="number">10</span>]];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">simpleNormalizeChildren</span>(<span class="params">children</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; children.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(children[i])) &#123;</span><br><span class="line">      children = <span class="built_in">Array</span>.prototype.concat.apply([], children);</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> j =<span class="number">0</span>; j&lt;children.length; j++) &#123;</span><br><span class="line">        simpleNormalizeChildren(children)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> children;</span><br><span class="line">&#125;</span><br><span class="line">simpleNormalizeChildren(children); </span><br><span class="line"><span class="comment">// result =&gt;  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-æ•°ç»„å»é‡"><a href="#2-æ•°ç»„å»é‡" class="headerlink" title="2. æ•°ç»„å»é‡"></a>2. æ•°ç»„å»é‡</h3><p>ï¼ˆ1ï¼‰ ES6 <code>set</code>æ–¹æ³• (Set å¯¹è±¡å…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">'true'</span>,<span class="string">'true'</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>,</span><br><span class="line"> <span class="literal">null</span>,<span class="literal">null</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>,<span class="string">'NaN'</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">'a'</span>, <span class="string">'a'</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="built_in">console</span>.log(unique(arr))</span><br><span class="line">Â <span class="comment">//[1, "true", true, 15, false, undefined, null, NaN, "NaN", 0, "a", &#123;&#125;, &#123;&#125;]</span></span><br></pre></td></tr></table></figure>
<div class="tip">
  setæ–¹æ³•æ— æ³•è¯†åˆ«é‡å¤çš„{}ç©ºå¯¹è±¡
</div> 

<p>ï¼ˆ2ï¼‰åŒé‡forå¾ªç¯ï¼Œspliceå»é‡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>)</span>&#123;            </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;arr.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=i+<span class="number">1</span>; j&lt;arr.length; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i]==arr[j])&#123;         <span class="comment">//å‰è€…ç­‰äºåè€…çš„æ—¶å€™ï¼Œspliceæ–¹æ³•åˆ é™¤åè€…</span></span><br><span class="line">                    arr.splice(j,<span class="number">1</span>);</span><br><span class="line">                    j--; </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">'true'</span>,<span class="string">'true'</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>,</span><br><span class="line">     <span class="literal">null</span>,<span class="literal">null</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>,<span class="string">'NaN'</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">'a'</span>, <span class="string">'a'</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line">    <span class="built_in">console</span>.log(unique(arr))</span><br><span class="line">    <span class="comment">//[1, "true", 15, false, undefined, NaN, NaN, "NaN", "a", &#123;â€¦&#125;, &#123;â€¦&#125;]</span></span><br></pre></td></tr></table></figure>
<div class="tip">
NaNå’Œ{}æ²¡æœ‰å»é‡ï¼Œä¸¤ä¸ªnullç›´æ¥æ¶ˆå¤±äº†
</div>


<p>(3) indexOfï¼ˆæ–°å»ºäº†ä¸€ä¸ªç©ºæ•°ç»„ï¼Œéå†æ—§æ•°ç»„ï¼Œå¦‚æœç©ºæ•°ç»„é‡Œæ²¡é‡åˆ°é‡å¤çš„éå†é¡¹ï¼Œåˆ™æ·»åŠ ï¼‰ </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(arr)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'type error!'</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> array = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array.indexOf(arr[i]) === <span class="number">-1</span>) &#123;</span><br><span class="line">            array.push(arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">'true'</span>,<span class="string">'true'</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>,</span><br><span class="line">           <span class="literal">null</span>,<span class="literal">null</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>,<span class="string">'NaN'</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">'a'</span>, <span class="string">'a'</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="built_in">console</span>.log(unique(arr))</span><br><span class="line">   <span class="comment">// [1, "true", true, 15, false, undefined, null, NaN, NaN, "NaN", 0, "a", &#123;â€¦&#125;, &#123;â€¦&#125;]</span></span><br></pre></td></tr></table></figure>
<div class="tip">
NaNã€{}æ²¡æœ‰å»é‡</div>

<p>(4) sortæ’åºåå†å»é‡ï¼ˆsortåä¸€æ ·çš„å…ƒç´ çš„ä¼šåœ¨æ—è¾¹ï¼Œåªéœ€ä¸èº«è¾¹çš„å¯¹æ¯”ï¼‰é«˜æ€§èƒ½ï¼Œæ¨èğŸ‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> seen; <span class="comment">// åŠ¨æ€æŒ‡é’ˆ</span></span><br><span class="line">  <span class="comment">// æµ…æ‹·è´å æ’åºtargetArr æ’åºæœ‰è¦æ±‚çš„è¯ï¼Œéœ€è¦sortä¼ å…¥è‡ªå®šä¹‰çš„æ’åºå‡½æ•°</span></span><br><span class="line">  <span class="keyword">var</span> targetArr = <span class="built_in">Array</span>.prototype.concat.call(arr).sort() </span><br><span class="line">  <span class="keyword">var</span> result = [];</span><br><span class="line">  <span class="comment">// ä¸ä¸Šä¸€ä½å¯¹æ¯” å› ä¸ºindexä¸º0çš„æ—¶å€™æ²¡æœ‰ä¸Šä¸€ä½ï¼Œæ‰€ä»¥ç›´æ¥æ’å…¥ç»“æœæ•°ç»„è¿”å›</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;targetArr.length; i++) &#123; </span><br><span class="line">     <span class="comment">// è¿™é‡Œ 0è½¬ä¸ºbooleanæ˜¯falseï¼Œ!0å³true</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªifæ˜¯ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€ä½ï¼Œæˆ–è€…ï¼ŒåŠ¨æ€æŒ‡é’ˆä¸éå†åˆ°çš„ä¸ä¸€æ ·ï¼Œå³æ˜¯åŒ¹é…åˆ°æ–°å…ƒç´ </span></span><br><span class="line">    <span class="keyword">if</span> (!i || seen !== targetArr[i]) &#123;</span><br><span class="line">      result.push(targetArr[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ›´æ–°æŒ‡é’ˆ</span></span><br><span class="line">    seen = targetArr[i]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// test</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="string">'true'</span>,<span class="string">'true'</span>,<span class="literal">true</span>,<span class="literal">true</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="literal">false</span>,<span class="literal">false</span>, <span class="literal">undefined</span>,<span class="literal">undefined</span>,</span><br><span class="line">         <span class="literal">null</span>,<span class="literal">null</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>,<span class="string">'NaN'</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">'a'</span>, <span class="string">'a'</span>,&#123;&#125;,&#123;&#125;];</span><br><span class="line"><span class="built_in">console</span>.log(unique(arr));</span><br></pre></td></tr></table></figure>

<div class="tip">
  sortæ–¹æ³•éœ€è¦æ³¨æ„çœ‹ä½¿ç”¨åœºæ™¯ï¼Œç‰¹æ®Šç±»å‹çš„æ—¶å€™ï¼Œsortä¼šæœ‰å‘ã€‚
</div>

<p>(5) underScore æ€è·¯ç‰ˆ ï¼ˆæä¾›ä¸‰ä¸ªå‚æ•°ï¼‰è¿™ä¸ªæ€è·¯æ‚ç³…ä¸Šé¢çš„æ–¹æ³•<br> <code>array</code>ï¼š å¿…å¡«å‚æ•°ï¼Œå»é‡ç›®æ ‡æ•°ç»„<br><code>isSorted</code>: è¡¨ç¤ºç›®æ ‡æ•°ç»„æ˜¯å¦å·²ç»æ’åºè¿‡äº†ï¼Œtrueçš„è¯ï¼Œå°†ä¼šé‡‡ç”¨æ–¹æ³•ï¼ˆ4ï¼‰é‚£æ ·çš„é«˜æ•ˆå¯¹æ¯”ã€‚falseçš„è¯ï¼Œç”¨indexOf<br><code>iteratee</code>: è‡ªå®šä¹‰å¯¹ç›®æ ‡æ•°ç»„çš„æ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">array, isSorted, iteratee</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = [];</span><br><span class="line">    <span class="keyword">var</span> seen = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = array.length; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> value = array[i];</span><br><span class="line">        <span class="keyword">var</span> computed = iteratee ? iteratee(value, i, array) : value;</span><br><span class="line">        <span class="keyword">if</span> (isSorted) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!i || seen !== computed) &#123;</span><br><span class="line">                res.push(value)</span><br><span class="line">            &#125;</span><br><span class="line">            seen = computed;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (iteratee) &#123;</span><br><span class="line">            <span class="keyword">if</span> (seen.indexOf(computed) === <span class="number">-1</span>) &#123;</span><br><span class="line">                seen.push(computed);</span><br><span class="line">                res.push(value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (res.indexOf(value) === <span class="number">-1</span>) &#123;</span><br><span class="line">            res.push(value);</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(unique(array3, <span class="literal">false</span>, <span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> item == <span class="string">'string'</span> ? item.toLowerCase() : item</span><br><span class="line">&#125;)); <span class="comment">// [1, "a", 2]</span></span><br></pre></td></tr></table></figure>

<p>(6) åˆ©ç”¨Objectçš„keyæ˜¯å”¯ä¸€çš„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">distinct</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> array.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, array</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj.hasOwnProperty(<span class="keyword">typeof</span> item + item) </span><br><span class="line">        ? <span class="literal">false</span></span><br><span class="line">        : (obj[<span class="keyword">typeof</span> item + item] = <span class="literal">true</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœŸæ˜¯å¹ä¸ºè§‚æ­¢ï¼Œå¦™ï¼å¦™åœ¨å“ªï¼Ÿ</p>
<ul>
<li><code>array.filter</code>æœ¬èº«å°±å…¼èŒ<code>éå†ï¼Œè¿‡æ»¤ï¼Œè¿”å›æ–°æ•°ç»„</code>äºä¸€èº«ï¼Œå¹²å‡€åˆ©è½</li>
<li>Objectçš„<code>keyç¡®å®æ˜¯å”¯ä¸€</code>çš„ï¼Œå¦‚æœé‡å¤æ—¶å€™ï¼Œåªèƒ½æ˜¯è¦†ç›–valueçš„</li>
<li>filterè¿‡æ»¤æ¡ä»¶éœ€è¦çš„<code>trueå’Œfalse</code>å°±ç”± Objæ˜¯å¦åŒ…å«è¿™ä¸ª<code>type+value</code>ä¸ºkey  æ¥å†³å®šï¼Œ<br>å¦‚æœä¹‹å‰æ²¡å­˜è¿›objï¼Œå¯ä»¥ä»»æ„è®¾ç½®ä¸€ä¸ªvalueï¼Œå°±æ˜¯ä¸‰å…ƒè¿ç®—ç¬¦é‡Œçš„<code>obj[typeof item + item] = true</code></li>
</ul>
<hr>
<h3 id="APIè¡¥å……ï¼š"><a href="#APIè¡¥å……ï¼š" class="headerlink" title="APIè¡¥å……ï¼š"></a>APIè¡¥å……ï¼š</h3><ol>
<li><code>reduce</code></li>
</ol>
<p>å‡åºè®©æ•°ç»„æ¯ä¸€é¡¹éƒ½è°ƒç”¨ä¼ å…¥å‡½æ•°ï¼Œå¯ä»¥è®¾ç½®åˆå§‹å€¼ã€‚<br>å››ä¸ªå‚æ•°<br><code>Accumulator</code> (acc) (ç´¯è®¡å™¨)<br><code>Current Value</code> (cur) (å½“å‰å€¼)<br><code>Current Index</code> (idx) (å½“å‰ç´¢å¼•)<br><code>Source Array</code>(src) (æºæ•°ç»„)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»Ÿè®¡å‡ºç°æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">'Alice'</span>, <span class="string">'Bob'</span>, <span class="string">'Tiff'</span>, <span class="string">'Bruce'</span>, <span class="string">'Alice'</span>];</span><br><span class="line"><span class="comment">// allNamesä¸ºAccumulatorç´¯ç§¯å™¨ï¼Œnameä¸ºå½“å‰å€¼</span></span><br><span class="line"><span class="keyword">var</span> countedNames = names.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">allNames, name</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">if</span> (name <span class="keyword">in</span> allNames) &#123;</span><br><span class="line">    allNames[name]++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    allNames[name] = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> allNames;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"><span class="comment">// countedNames is:</span></span><br><span class="line"><span class="comment">// &#123; 'Alice': 2, 'Bob': 1, 'Tiff': 1, 'Bruce': 1 &#125;</span></span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pipe = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// proxyç»“åˆreduceå®ç° é“¾å¼è°ƒç”¨å‡½æ•°å°è£… éœ€æ˜¯getç»“å°¾</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123; <span class="comment">// valueæ˜¯å‚æ•° é—­åŒ…ç¼“å­˜funcStackæ•°ç»„</span></span><br><span class="line">          <span class="keyword">var</span> funcStack = [];</span><br><span class="line">          <span class="keyword">var</span> oproxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125; , &#123;</span><br><span class="line">              <span class="keyword">get</span> : function (pipeObject, fnName) &#123;</span><br><span class="line">                  <span class="built_in">console</span>.log(<span class="string">'fnName is:'</span> + fnName)</span><br><span class="line">                  <span class="keyword">if</span> (fnName === <span class="string">'get'</span>) &#123;</span><br><span class="line">                      <span class="keyword">return</span> funcStack.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">val, fn</span>) </span>&#123;</span><br><span class="line">                          <span class="keyword">return</span> fn(val);</span><br><span class="line">                      &#125;,value);</span><br><span class="line">                  &#125;</span><br><span class="line">                  funcStack.push(<span class="built_in">window</span>[fnName]);</span><br><span class="line">                  <span class="built_in">console</span>.log(funcStack)</span><br><span class="line">                  <span class="keyword">return</span> oproxy;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">return</span> oproxy;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> double = <span class="function"><span class="params">n</span> =&gt;</span> n * <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">var</span> pow    = <span class="function"><span class="params">n</span> =&gt;</span> n * n;</span><br><span class="line">  <span class="keyword">var</span> reverseInt = <span class="function"><span class="params">n</span> =&gt;</span> n.toString().split(<span class="string">""</span>).reverse().join(<span class="string">""</span>) | <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(pipe(<span class="number">3</span>)[<span class="string">'double'</span>].pow.get);</span><br><span class="line">  <span class="comment">// pipe(3).double.pow.reverseInt.get; // 63</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p><code>slice</code><br>ç±»æ•°ç»„ =&gt; çœŸæ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">list</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä¹Ÿå¯ä»¥å†™æˆ [].slice.call(arguments) </span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> list1 = list(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Array.from</code><br>ä»ä¸€ä¸ªç±»ä¼¼æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œ<code>æµ…æ‹·è´</code>çš„æ•°ç»„å®ä¾‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(arrayLike[, mapFn[, thisArg]])</span><br></pre></td></tr></table></figure>
<p><code>arrayLike</code>ï¼šæƒ³è¦è½¬æ¢æˆæ•°ç»„çš„ä¼ªæ•°ç»„å¯¹è±¡æˆ–å¯è¿­ä»£å¯¹è±¡ã€‚æ¯”å¦‚æ‹¥æœ‰ä¸€ä¸ª length å±æ€§å’Œè‹¥å¹²ç´¢å¼•å±æ€§çš„ä»»æ„å¯¹è±¡å’ŒMapã€setç­‰ã€‚<br><code>mapFn</code> å¯é€‰ï¼šå¦‚æœæŒ‡å®šäº†è¯¥å‚æ•°ï¼Œæ–°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¼šæ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ã€‚<br><code>thisArg</code> å¯é€‰ï¼šå¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> someNumbers = &#123; <span class="string">'0'</span>: <span class="number">10</span>, <span class="string">'1'</span>: <span class="number">15</span>, <span class="attr">length</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="built_in">Array</span>.from(someNumbers, value =&gt; value * <span class="number">2</span>); <span class="comment">// =&gt; [20, 30] è¿™é‡Œåˆ©ç”¨äº†mapFnçš„èƒ½åŠ›</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumArguments</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>).reduce(<span class="function">(<span class="params">sum, num</span>) =&gt;</span> sum + num);</span><br><span class="line">&#125;</span><br><span class="line">sumArguments(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// =&gt; 6 //è¿™é‡Œåˆ©ç”¨äº†è½¬åŒ–ä¼ªæ•°ç»„æˆçœŸæ•°ç»„çš„èƒ½åŠ›</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p><code>Array.concat()</code> ä¸ä¼ å‚æ•°çš„æ—¶å€™ï¼Œæ˜¯ä¸€ç§æµ…æ‹·è´çš„è¡Œä¸º</p>
</li>
<li><p><code>Array.filter(function(){})</code>  å¦‚åï¼Œfilterï¼Œè¿‡æ»¤ï¼Œè¯¥æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚ä¸æ”¹å˜åŸæ•°ç»„</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newArray = arr.filter(callback(element[, index[, array]])[, thisArg])</span><br></pre></td></tr></table></figure>
<p><code>callback</code>: ç”¨æ¥æµ‹è¯•æ•°ç»„å…ƒç´ çš„å‡½æ•° return trueæ—¶ ä¿ç•™å…ƒç´  å¦åˆ™ä¸ä¿ç•™ã€‚<br><code>index</code>: å½“å‰å¤„ç†ç´¢å¼•<br><code>array</code>: è°ƒç”¨äº†filterçš„æ•°ç»„æœ¬èº«</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// åˆ›å»ºäº†ä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¯¥æ•°ç»„çš„å…ƒç´ ç”±åŸæ•°ç»„ä¸­å€¼å¤§äº 10 çš„å…ƒç´ ç»„æˆ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBigEnough</span>(<span class="params">element</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">return</span> element &gt;= <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> filtered = [<span class="number">12</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>].filter(isBigEnough);</span><br></pre></td></tr></table></figure>


<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="noopener">MDN - slice</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener">MDN - reduce</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof" target="_blank" rel="noopener">MDN - typeof</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener">MDN - Array.from</a><br><a href="https://juejin.im/post/5b4d35406fb9a04fd55ac064" target="_blank" rel="noopener">æ˜é‡‘ reduce</a><br><a href="https://juejin.im/post/5d66b019f265da03a715e5d7" target="_blank" rel="noopener">æ˜é‡‘ Array.from</a><br><a href="https://www.lagou.com/lgeduarticle/86449.html" target="_blank" rel="noopener">æ‹‰é’©åšæ–‡</a><br><a href="https://github.com/mqyqingfeng/Blog/issues/27" target="_blank" rel="noopener">å†´ç¾½ Arrayå»é‡ issue</a><br><a href="http://www.ruanyifeng.com/blog/2017/03/reduce_transduce.html" target="_blank" rel="noopener">é˜®ä¸€å³° reduce transduce å…³äº å‡½æ•°ç¼–ç¨‹</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2020/05/27/%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/" class="prev">ä¸Šä¸€ç¯‡</a><a href="/2020/04/27/vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" class="next">ä¸‹ä¸€ç¯‡</a></div><div id="vcomments"></div><!--script(src="//unpkg.com/valine/dist/Valine.min.js")--><script>new Valine({ // é‡Œé¢çš„å‚æ•°é…ç½®å…·ä½“å‚è€ƒValineå®˜ç½‘
    el: '#vcomments',
    appId: `Hv8Cfy93FCgDUy3fP2Av9Ies-gzGzoHsz`,
    appKey: `4fAniISvXobBOUUx5SEE89dV`,
    placeholder: 'å¿«æ¥è¯„è®ºå§(#^.^#)',
    avatar: 'wavatar'
});</script><div class="copyright"><p>Â© 2017 - 2020 <a href="https://jonnzer.github.io">Jonnzer</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/MikeCoder/hexo-theme-gandalfr" target="_blank">hexo-theme-gandalfr</a>.</p></div></footer></div><script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script src="/js/jquery.js"></script></body></html>